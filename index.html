
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>âœ¨ å•µå•µèƒ½é‡åœº | äº’åŠ¨ç²’å­è‰ºæœ¯</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            overflow: hidden;
            background: radial-gradient(circle at center, #000428 0%, #004e92 100%);
            font-family: 'PingFang SC', -apple-system, BlinkMacSystemFont, sans-serif;
            height: 100vh;
            color: white;
            cursor: none;
            user-select: none;
        }
        
        /* è‡ªå®šä¹‰å…‰æ ‡ */
        .custom-cursor {
            position: fixed;
            width: 32px;
            height: 32px;
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.1s;
            transform: translate(-50%, -50%);
        }
        
        /* ä¸»ç”»å¸ƒ */
        #canvas {
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        /* ====== ç§‘å¹»æ„ŸUIé¢æ¿ ====== */
        .ui-panel {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            padding: 20px;
            background: linear-gradient(to bottom, 
                rgba(0, 30, 60, 0.9) 0%,
                rgba(0, 20, 40, 0.7) 100%);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 255, 255, 0.3);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .stat-card {
            background: rgba(0, 40, 80, 0.6);
            border: 1px solid rgba(0, 200, 255, 0.2);
            border-radius: 12px;
            padding: 12px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            border-color: rgba(0, 255, 255, 0.5);
            box-shadow: 0 5px 20px rgba(0, 255, 255, 0.2);
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 800;
            background: linear-gradient(45deg, #00ffff, #0080ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        /* ç²’å­æ¨¡å¼é€‰æ‹©å™¨ */
        .mode-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .mode-btn {
            background: rgba(0, 60, 120, 0.5);
            border: 1px solid rgba(0, 200, 255, 0.3);
            color: rgba(255, 255, 255, 0.8);
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mode-btn.active {
            background: linear-gradient(45deg, #00ffff, #0080ff);
            color: #000;
            font-weight: 600;
            border-color: #00ffff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }
        
        /* ====== æ‰‹åŠ¿æç¤º ====== */
        .gesture-hint {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            text-align: center;
            animation: floatHint 3s ease-in-out infinite;
        }
        
        .hint-text {
            background: rgba(0, 0, 0, 0.6);
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* ====== æˆå°±å¼¹çª— ====== */
        .achievement-popup {
            position: fixed;
            top: 120px;
            right: 20px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.9), rgba(255, 140, 0, 0.9));
            color: #000;
            padding: 15px 20px;
            border-radius: 12px;
            z-index: 150;
            transform: translateX(150%);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            min-width: 250px;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
        }
        
        .achievement-popup.show {
            transform: translateX(0);
        }
        
        /* ====== ç»ˆææ–‡å­—ç‰¹æ•ˆ ====== */
        .epic-text-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 300;
            pointer-events: none;
            opacity: 0;
        }
        
        .epic-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            font-size: 72px;
            font-weight: 900;
            text-align: center;
            line-height: 1.2;
            opacity: 0;
        }
        
        .char {
            display: inline-block;
            opacity: 0;
            transform: translateY(100px) rotateX(90deg);
            text-shadow: 
                0 0 10px currentColor,
                0 0 20px currentColor,
                0 0 40px
        }
        
        /* ====== æ§åˆ¶é¢æ¿ ====== */
        .control-panel {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-end;
        }
        
        .control-btn {
            background: rgba(0, 40, 80, 0.8);
            border: 1px solid rgba(0, 200, 255, 0.4);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }
        
        .control-btn:hover {
            transform: scale(1.1);
            background: rgba(0, 100, 200, 0.9);
            box-shadow: 0 0 20px rgba(0, 200, 255, 0.5);
        }
        
        /* ====== åŠ¨ç”»å®šä¹‰ ====== */
        @keyframes floatHint {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }
        
        @keyframes particleGlow {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .epic-text { font-size: 48px; }
            .ui-panel { padding: 15px; }
        }
    </style>
</head>
<body>
    <!-- è‡ªå®šä¹‰å…‰æ ‡ -->
    <div class="custom-cursor" id="cursor">âœ¨</div>
    
    <!-- ä¸»ç”»å¸ƒ -->
    <canvas id="canvas"></canvas>
    
    <!-- ç§‘å¹»UIé¢æ¿ -->
    <div class="ui-panel">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="particleCount">0</div>
                <div class="stat-label">ç²’å­æ€»æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="comboCount">0</div>
                <div class="stat-label">è¿å‡»æ¬¡æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="energyLevel">0%</div>
                <div class="stat-label">èƒ½é‡å……èƒ½</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="fpsCounter">60</div>
                <div class="stat-label">FPS</div>
            </div>
        </div>
        
        <div class="mode-selector">
            <div class="mode-btn active" data-mode="normal">âœ¨ æ˜Ÿå°˜æ¨¡å¼</div>
            <div class="mode-btn" data-mode="magnetic">ğŸ§² ç£åŠ›æ¨¡å¼</div>
            <div class="mode-btn" data-mode="fireworks">ğŸ† çƒŸèŠ±æ¨¡å¼</div>
            <div class="mode-btn" data-mode="vortex">ğŸŒ€ æ¼©æ¶¡æ¨¡å¼</div>
            <div class="mode-btn" data-mode="rainbow">ğŸŒˆ å½©è™¹æ¨¡å¼</div>
        </div>
    </div>
    
    <!-- æ‰‹åŠ¿æç¤º -->
    <div class="gesture-hint">
        <div class="hint-text">ğŸ® æ»‘åŠ¨ã€é•¿æŒ‰ã€åŒå‡»ã€ç”»åœˆä½“éªŒä¸åŒç‰¹æ•ˆï¼</div>
    </div>
    
    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="control-panel">
        <div class="control-btn" id="clearBtn" title="æ¸…ç©ºç²’å­">ğŸ—‘ï¸</div>
        <div class="control-btn" id="explodeBtn" title="ç²’å­çˆ†ç ´">ğŸ’¥</div>
        <div class="control-btn" id="gravityBtn" title="é‡åŠ›åˆ‡æ¢">â¬‡ï¸</div>
        <div class="control-btn" id="soundBtn" title="éŸ³æ•ˆå¼€å…³">ğŸ”Š</div>
    </div>
    
    <!-- æˆå°±å¼¹çª—å®¹å™¨ -->
    <div id="achievementContainer"></div>
    
    <!-- ç»ˆææ–‡å­—ç‰¹æ•ˆå®¹å™¨ -->
    <div class="epic-text-container" id="epicTextContainer">
        <div class="epic-text" id="epicText"></div>
    </div>

    <script>
    // ========== å…¨å±€é…ç½®ä¸å˜é‡ ==========
    const CONFIG = {
        maxParticles: 1500,
        particleLifetime: 300,
        gravity: 0.1,
        modes: {
            normal: { color: '#00ffff', speed: 1, size: 3 },
            magnetic: { color: '#ff0080', speed: 2, size: 4 },
            fireworks: { color: '#ffff00', speed: 5, size: 6 },
            vortex: { color: '#00ff80', speed: 3, size: 4 },
            rainbow: { color: 'rainbow', speed: 2, size: 4 }
        }
    };
    
    // æ¸¸æˆçŠ¶æ€
    let particles = [];
    let particleCount = 0;
    let comboCount = 0;
    let lastInteractionTime = Date.now();
    let currentMode = 'normal';
    let gravityEnabled = true;
    let soundEnabled = true;
    let energyLevel = 0;
    let achievements = new Set();
    let canvas, ctx;
    let mouseX = 0, mouseY = 0;
    let cursorParticles = [];
    let lastFPSUpdate = Date.now();
    let frameCount = 0;
    let currentFPS = 60;
    
    // éŸ³æ•ˆç³»ç»Ÿï¼ˆä½¿ç”¨Web Audio APIï¼‰
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    let masterGain = audioContext.createGain();
    masterGain.connect(audioContext.destination);
    masterGain.gain.value = 0.3;
    
    // æˆå°±å®šä¹‰
    const ACHIEVEMENTS = [
        { id: 'first_100', name: 'ç²’å­åˆå­¦è€…', desc: 'ç”Ÿæˆ100ä¸ªç²’å­', target: 100, icon: 'ğŸŒ±' },
        { id: 'combo_10', name: 'è¿å‡»å¤§å¸ˆ', desc: 'è¾¾æˆ10è¿å‡»', target: 10, icon: 'âš¡' },
        { id: 'particle_1000', name: 'ç²’å­ç‹‚äºº', desc: 'ç”Ÿæˆ1000ä¸ªç²’å­', target: 1000, icon: 'ğŸŒ€' },
        { id: 'energy_full', name: 'èƒ½é‡è§‰é†’', desc: 'å……èƒ½è¾¾åˆ°100%', target: 100, icon: 'ğŸ’¥' },
        { id: 'mode_all', name: 'æ¨¡å¼å¤§å¸ˆ', desc: 'ä½“éªŒæ‰€æœ‰æ¨¡å¼', target: 5, icon: 'ğŸ®' }
    ];
    
    // ========== ç²’å­ç³»ç»Ÿ ==========
    class Particle {
        constructor(x, y, type = 'normal') {
            this.x = x;
            this.y = y;
            this.vx = (Math.random() - 0.5) * 10;
            this.vy = (Math.random() - 0.5) * 10;
            this.type = type;
            this.size = Math.random() * CONFIG.modes[type].size + 2;
            this.life = CONFIG.particleLifetime;
            this.maxLife = CONFIG.particleLifetime;
            this.rotation = Math.random() * Math.PI * 2;
            this.rotationSpeed = (Math.random() - 0.5) * 0.2;
            this.color = this.getColor();
            this.trail = [];
            this.maxTrail = 5;
            this.glow = Math.random() * 0.5 + 0.5;
        }
        
        getColor() {
            if (CONFIG.modes[this.type].color === 'rainbow') {
                return `hsl(${Date.now() * 0.01 % 360}, 100%, 60%)`;
            }
            return CONFIG.modes[this.type].color;
        }
        
        update() {
            // ä¿å­˜è½¨è¿¹
            this.trail.push({ x: this.x, y: this.y });
            if (this.trail.length > this.maxTrail) this.trail.shift();
            
            // ç‰©ç†æ›´æ–°
            this.x += this.vx;
            this.y += this.vy;
            this.rotation += this.rotationSpeed;
            
            // å¼•åŠ›æ•ˆæœ
            if (gravityEnabled && this.type !== 'magnetic') {
                this.vy += CONFIG.gravity;
            }
            
            // ç”Ÿå‘½å‘¨æœŸ
            this.life--;
            this.glow = 0.5 + 0.5 * Math.sin(Date.now() * 0.01);
            
            // æ¨¡å¼ç‰¹å®šè¡Œä¸º
            switch(this.type) {
                case 'magnetic':
                    // å‘é¼ æ ‡å¸å¼•
                    const dx = mouseX - this.x;
                    const dy = mouseY - this.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    if (dist < 300) {
                        this.vx += dx * 0.001;
                        this.vy += dy * 0.001;
                    }
                    break;
                    
                case 'vortex':
                    // æ¼©æ¶¡è¿åŠ¨
                    const angle = Math.atan2(this.y - mouseY, this.x - mouseX);
                    const radius = Math.sqrt(
                        Math.pow(this.x - mouseX, 2) + 
                        Math.pow(this.y - mouseY, 2)
                    );
                    const force = 1000 / (radius + 100);
                    this.vx += Math.cos(angle + Math.PI/2) * force;
                    this.vy += Math.sin(angle + Math.PI/2) * force;
                    break;
            }
            
            // é€Ÿåº¦è¡°å‡
            this.vx *= 0.99;
            this.vy *= 0.99;
            
            return this.life > 0;
        }
        
        draw() {
            // ç»˜åˆ¶è½¨è¿¹
            ctx.save();
            for (let i = 0; i < this.trail.length; i++) {
                const point = this.trail[i];
                const alpha = i / this.trail.length * 0.3;
                ctx.globalAlpha = alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(point.x, point.y, this.size * 0.5, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // ç»˜åˆ¶ç²’å­ä¸»ä½“
            ctx.globalAlpha = this.life / this.maxLife * 0.8 * this.glow;
            ctx.fillStyle = this.color;
            ctx.shadowColor = this.color;
            ctx.shadowBlur = 15 * this.glow;
            
            // ä¸åŒå½¢çŠ¶
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.rotate(this.rotation);
            
            switch(this.type) {
                case 'fireworks':
                    // æ˜Ÿå½¢
                    ctx.beginPath();
                    for (let i = 0; i < 5; i++) {
                        const angle = (i * Math.PI * 2) / 5;
                        const spike = this.size * 1.5;
                        ctx.lineTo(
                            Math.cos(angle) * spike,
                            Math.sin(angle) * spike
                        );
                    }
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                default:
                    // åœ†å½¢
                    ctx.beginPath();
                    ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                    ctx.fill();
            }
            
            ctx.restore();
            ctx.restore();
        }
    }
    
    // ========== æ¸¸æˆåŠŸèƒ½å‡½æ•° ==========
    function createParticles(x, y, count = 10, type = currentMode) {
        for (let i = 0; i < count; i++) {
            if (particles.length < CONFIG.maxParticles) {
                particles.push(new Particle(x, y, type));
                particleCount++;
                
                // æ’­æ”¾éŸ³æ•ˆ
                if (soundEnabled) {
                    playSound('create');
                }
            }
        }
        
        // æ›´æ–°UI
        updateUI();
        updateAchievements();
        
        // è¿å‡»ç³»ç»Ÿ
        const now = Date.now();
        if (now - lastInteractionTime < 500) {
            comboCount++;
            if (comboCount % 5 === 0) {
                showComboEffect();
            }
        } else {
            comboCount = 1;
        }
        lastInteractionTime = now;
        
        // èƒ½é‡å……èƒ½
        energyLevel = Math.min(100, energyLevel + 0.5);
    }
    
    function updateUI() {
        document.getElementById('particleCount').textContent = particleCount;
        document.getElementById('comboCount').textContent = comboCount;
        document.getElementById('energyLevel').textContent = Math.round(energyLevel) + '%';
        document.getElementById('fpsCounter').textContent = currentFPS;
    }
    
    function showComboEffect() {
        // è¿å‡»ç‰¹æ•ˆ
        const effect = document.createElement('div');
        effect.style.cssText = `
            position: fixed;
            top: ${mouseY}px;
            left: ${mouseX}px;
            color: #ff0080;
            font-size: 24px;
            font-weight: bold;
            pointer-events: none;
            z-index: 200;
            animation: comboFloat 1s forwards;
        `;
        effect.textContent = `${comboCount} COMBO!`;
        document.body.appendChild(effect);
        setTimeout(() => effect.remove(), 1000);
    }
    
    function updateAchievements() {
        ACHIEVEMENTS.forEach(achievement => {
            if (!achievements.has(achievement.id)) {
                let progress = 0;
                switch(achievement.id) {
                    case 'first_100': progress = particleCount; break;
                    case 'combo_10': progress = comboCount; break;
                    case 'particle_1000': progress = particleCount; break;
                    case 'energy_full': progress = energyLevel; break;
                    case 'mode_all': progress = new Set(particles.map(p => p.type)).size; break;
                }
                
                if (progress >= achievement.target) {
                    unlockAchievement(achievement);
                }
            }
        });
    }
    
    function unlockAchievement(achievement) {
        achievements.add(achievement.id);
        
        const popup = document.createElement('div');
        popup.className = 'achievement-popup';
        popup.innerHTML = `
            <div style="font-size: 24px; margin-bottom: 5px;">${achievement.icon}</div>
            <div style="font-weight: bold; margin-bottom: 3px;">${achievement.name}</div>
            <div style="font-size: 12px; opacity: 0.8;">${achievement.desc}</div>
        `;
        
        document.getElementById('achievementContainer').appendChild(popup);
        
        setTimeout(() => popup.classList.add('show'), 10);
        setTimeout(() => {
            popup.classList.remove('show');
            setTimeout(() => popup.remove(), 500);
        }, 3000);
        
        // æ’­æ”¾æˆå°±éŸ³æ•ˆ
        if (soundEnabled) {
            playSound('achievement');
        }
    }
    
    function playSound(type) {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(masterGain);
        
        switch(type) {
            case 'create':
                oscillator.frequency.value = 800 + Math.random() * 400;
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.1);
                break;
                
            case 'achievement':
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
                oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // G5
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.5);
                break;
        }
    }
    
    function triggerEpicText() {
        const text = "é³Œæ‹œæ˜¯é›·æ©æœ€çˆ±çš„å®å®";
        const container = document.getElementById('epicTextContainer');
        const textElement = document.getElementById('epicText');
        textElement.innerHTML = '';
        
        // åˆ›å»ºå­—ç¬¦å…ƒç´ 
        for (let i = 0; i < text.length; i++) {
            const char = document.createElement('span');
            char.className = 'char';
            char.textContent = text[i];
            char.style.color = `hsl(${i * 30}, 100%, 60%)`;
            textElement.appendChild(char);
        }
        
        // æ˜¾ç¤ºå®¹å™¨
        container.style.opacity = '1';
        
        // é€å­—åŠ¨ç”»
        const chars = textElement.querySelectorAll('.char');
        chars.forEach((char, index) => {
            setTimeout(() => {
                char.style.animation = `textReveal 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards`;
                char.style.opacity = '1';
                char.style.transform = 'translateY(0) rotateX(0)';
                
                // æ¯ä¸ªå­—ç¬¦å‡ºç°æ—¶åˆ›å»ºç²’å­çˆ†ç‚¸
                const rect = char.getBoundingClientRect();
                createParticles(
                    rect.left + rect.width / 2,
                    rect.top + rect.height / 2,
                    30,
                    'fireworks'
                );
            }, index * 100);
        });
        
        // èƒŒæ™¯ç²’å­çˆ†ç‚¸
        setTimeout(() => {
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    createParticles(
                        Math.random() * canvas.width,
                        Math.random() * canvas.height,
                        50,
                        'fireworks'
                    );
                }, i * 200);
            }
        }, text.length * 100 + 500);
    }
    
    // ========== åŠ¨ç”»å¾ªç¯ ==========
    function animate() {
        frameCount++;
        const now = Date.now();
        
        // æ›´æ–°FPSè®¡æ•°
        if (now - lastFPSUpdate >= 1000) {
            currentFPS = frameCount;
            frameCount = 0;
            lastFPSUpdate = now;
        }
        
        // æ¸…ç©ºç”»å¸ƒ
        ctx.fillStyle = 'rgba(0, 4, 40, 0.1)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // ç»˜åˆ¶èƒŒæ™¯ç½‘æ ¼
        drawGrid();
        
        // æ›´æ–°å¹¶ç»˜åˆ¶ç²’å­
        particles = particles.filter(p => p.update());
        particles.forEach(p => p.draw());
        
        // ç»˜åˆ¶å…‰æ ‡è½¨è¿¹
        drawCursorTrail();
        
        requestAnimationFrame(animate);
    }
    
    function drawGrid() {
        ctx.strokeStyle = 'rgba(0, 150, 255, 0.05)';
        ctx.lineWidth = 1;
        
        const gridSize = 50;
        for (let x = 0; x < canvas.width; x += gridSize) {
            ctx.beginPath();
            ctx.moveTo(x, 0);
            ctx.lineTo(x, canvas.height);
            ctx.stroke();
        }
        for (let y = 0; y < canvas.height; y += gridSize) {
            ctx.beginPath();
            ctx.moveTo(0, y);
            ctx.lineTo(canvas.width, y);
            ctx.stroke();
        }
    }
    
    function drawCursorTrail() {
        cursorParticles.push({ x: mouseX, y: mouseY, life: 20 });
        
        ctx.save();
        cursorParticles.forEach((p, i) => {
            p.life--;
            if (p.life <= 0) {
                cursorParticles.splice(i, 1);
                return;
            }
            
            const alpha = p.life / 20;
            ctx.globalAlpha = alpha * 0.5;
            ctx.fillStyle = '#00ffff';
            ctx.beginPath();
            ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
            ctx.fill();
        });
        ctx.restore();
    }
    
    // ========== äº‹ä»¶å¤„ç† ==========
    function handleInteraction(x, y, type = 'normal', count = 15) {
        createParticles(x, y, count, type);
        
        // èƒ½é‡æ»¡æ—¶è§¦å‘ç»ˆæç‰¹æ•ˆ
        if (energyLevel >= 100) {
            triggerEpicText();
            energyLevel = 0;
        }
    }
    
    function handleGesture(x, y, gesture) {
        switch(gesture) {
            case 'circle':
                createParticles(x, y, 50, 'vortex');
                break;
            case 'swipe':
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => {
                        createParticles(
                            x + Math.random() * 100 - 50,
                            y + Math.random() * 100 - 50,
                            10,
                            'magnetic'
                        );
                    }, i * 50);
                }
                break;
            case 'doubletap':
                createParticles(x, y, 100, 'fireworks');
                break;
        }
    }
    
    // ========== åˆå§‹åŒ– ==========
    document.addEventListener('DOMContentLoaded', function() {
        console.log('ğŸš€ ç»ˆæå•µå•µèƒ½é‡åœºå¯åŠ¨ä¸­...');
        
        // åˆå§‹åŒ–Canvas
        canvas = document.getElementById('canvas');
        ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        // åˆå§‹åŒ–å…‰æ ‡è·Ÿè¸ª
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            document.getElementById('cursor').style.left = mouseX + 'px';
            document.getElementById('cursor').style.top = mouseY + 'px';
        });
        
        // è§¦æ‘¸äº‹ä»¶
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            mouseX = touch.clientX;
            mouseY = touch.clientY;
            handleInteraction(mouseX, mouseY);
        });
        
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            for (let touch of e.touches) {
                handleInteraction(touch.clientX, touch.clientY);
            }
        });
        
        // é¼ æ ‡äº‹ä»¶
        canvas.addEventListener('mousedown', (e) => {
            handleInteraction(e.clientX, e.clientY);
            
            // é•¿æŒ‰æ£€æµ‹
            let pressTimer = setTimeout(() => {
                handleGesture(e.clientX, e.clientY, 'circle');
            }, 500);
            
            canvas.addEventListener('mouseup', () => clearTimeout(pressTimer), { once: true });
        });
        
        canvas.addEventListener('mousemove', (e) => {
            if (e.buttons === 1) {
                handleInteraction(e.clientX, e.clientY);
            }
        });
        
        // åŒå‡»æ£€æµ‹
        let lastTap = 0;
        canvas.addEventListener('click', (e) => {
            const now = Date.now();
            if (now - lastTap < 300) {
                handleGesture(e.clientX, e.clientY, 'doubletap');
            }
            lastTap = now;
        });
        
        // ç”»åœˆæ‰‹åŠ¿æ£€æµ‹
        let gesturePoints = [];
        canvas.addEventListener('mousemove', (e) => {
            if (e.buttons === 1) {
                gesturePoints.push({ x: e.clientX, y: e.clientY });
                if (gesturePoints.length > 50) gesturePoints.shift();
            }
        });
        
        canvas.addEventListener('mouseup', () => {
            if (gesturePoints.length > 20) {
                // ç®€å•çš„æ‰‹åŠ¿è¯†åˆ«ï¼ˆæ£€æµ‹æ˜¯å¦ä¸ºåœ†å½¢ï¼‰
                const bounds = gesturePoints.reduce((acc, p) => ({
                    minX: Math.min(acc.minX, p.x),
                    maxX: Math.max(acc.maxX, p.x),
                    minY: Math.min(acc.minY, p.y),
                    maxY: Math.max(acc.maxY, p.y)
                }), { minX: Infinity, maxX: -Infinity, minY: Infinity, maxY: -Infinity });
                
                const width = bounds.maxX - bounds.minX;
                const height = bounds.maxY - bounds.minY;
                const aspectRatio = Math.min(width, height) / Math.max(width, height);
                
                if (aspectRatio > 0.7 && width > 100 && height > 100) {
                    const centerX = (bounds.minX + bounds.maxX) / 2;
                    const centerY = (bounds.minY + bounds.maxY) / 2;
                    handleGesture(centerX, centerY, 'circle');
                }
            }
            gesturePoints = [];
        });
        
        // æ§åˆ¶æŒ‰é’®äº‹ä»¶
        document.getElementById('clearBtn').addEventListener('click', () => {
            particles = [];
            particleCount = 0;
            updateUI();
        });
        
        document.getElementById('explodeBtn').addEventListener('click', () => {
            particles.forEach(p => {
                p.vx = (Math.random() - 0.5) * 20;
                p.vy = (Math.random() - 0.5) * 20;
            });
        });
        
        document.getElementById('gravityBtn').addEventListener('click', () => {
            gravityEnabled = !gravityEnabled;
            document.getElementById('gravityBtn').textContent = 
                gravityEnabled ? 'â¬‡ï¸' : 'â¬†ï¸';
        });
        
        document.getElementById('soundBtn').addEventListener('click', () => {
            soundEnabled = !soundEnabled;
            masterGain.gain.value = soundEnabled ? 0.3 : 0;
            document.getElementById('soundBtn').textContent = 
                soundEnabled ? 'ğŸ”Š' : 'ğŸ”‡';
        });
        
        // æ¨¡å¼åˆ‡æ¢
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-btn').forEach(b => 
                    b.classList.remove('active'));
                btn.classList.add('active');
                currentMode = btn.dataset.mode;
            });
        });
        
        // çª—å£å¤§å°è°ƒæ•´
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
        
        // æ·»åŠ CSSåŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
            @keyframes textReveal {
                0% { 
                    opacity: 0;
                    transform: translateY(100px) rotateX(90deg);
                    filter: blur(20px);
                }
                100% { 
                    opacity: 1;
                    transform: translateY(0) rotateX(0);
                    filter: blur(0);
                }
            }
            
            @keyframes comboFloat {
                0% { 
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                }
                100% { 
                    opacity: 0;
                    transform: translate(-50%, -150px) scale(1.5);
                }
            }
        `;
        document.head.appendChild(style);
        
        // å¯åŠ¨åŠ¨ç”»
        animate();
        
        // åˆå§‹ç²’å­æ•ˆæœ
        setTimeout(() => {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createParticles(
                        Math.random() * canvas.width,
                        Math.random() * canvas.height,
                        20,
                        i % 2 === 0 ? 'normal' : 'rainbow'
                    );
                }, i * 200);
            }
        }, 1000);
        
        console.log('âœ… å•µå•µèƒ½é‡åœºå¯åŠ¨å®Œæˆï¼');
    });
    </script>
</body>
</html>
```
